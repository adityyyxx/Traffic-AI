<script>
  const form = document.getElementById("uploadForm");
  const resultText = document.getElementById("resultText");
  const loading = document.getElementById("loading");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const fileInput = document.getElementById("fileInput");
    const file = fileInput.files[0];
    if (!file) return;

    loading.style.display = "block";
    resultText.style.display = "none";

    const formData = new FormData();
    formData.append("file", file);

    try {
      const response = await fetch("http://127.0.0.1:8080/detect", {  // üß† Use your Flask local backend
      // Or use your IP instead like: http://192.168.1.43:8080/detect
        method: "POST",
        body: formData
      });

      const text = await response.text();
      resultText.innerText = text;
      resultText.style.display = "block";
      resultText.className = response.ok
        ? "alert alert-success text-center"
        : "alert alert-danger text-center";

    } catch (error) {
      resultText.innerText = "‚ùå Error: " + error.message;
      resultText.className = "alert alert-danger text-center";
      resultText.style.display = "block";

    } finally {
      loading.style.display = "none";
    }
  });

  function triggerFileUpload() {
    document.getElementById("fileInput").click();
  }
</script>
